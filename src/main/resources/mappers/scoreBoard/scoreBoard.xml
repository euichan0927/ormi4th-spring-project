<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.estsoft.springproject.repository.ScoreBoardMapper">
    <select id="findById" resultType="com.estsoft.springproject.domain.dto.ScoreBoard">
        select away_score as awayScore, away_runs as awayRuns, away_stats as awayStats,
               away_team.name as awayTeamName, away_team.emblem_path as awayEmblemPath,
               home_score as homeScore, home_runs as homeRuns, home_stats as homeStats,
               home_team.name as homeTeamName, home_team.emblem_path as homeEmblemPath,
               s.status as `status`, s.stadium as stadium, DATE_FORMAT(time(s.match_date), '%H:%i') as `time`
        from score_board sb
        inner join team away_team on away_team.id = substring(sb.id,9,1) + 1
        inner join team home_team on home_team.id = substring(sb.id,10,1) + 1
        inner join `schedule` s on s.id = sb.id
        where sb.id = #{id}
    </select>
</mapper>